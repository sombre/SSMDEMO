<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssm.dao.PostService">

    <select id="showPostAndComment" resultType="HashMap">
        SELECT p.pid,p.title,p.authorid AS post_authorid,p.content AS pcontent,p.created_at AS post_create_at,
        p.created_by AS post_create_by,
        c.cid,c.pid AS cpid,c.authorid AS comm_authorid,c.content AS comm_content,c.create_at AS comm_create_at
        FROM post as p
        LEFT JOIN comment AS c ON p.pid = c.pid
    </select>



    <select id="selectPostComment" resultMap="CommentResultMap" parameterType="long">
        SELECT * FROM comment where comment.pid = #{id}
    </select>

    <resultMap id="CommentResultMap" type="com.ssm.model.Comment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="cid" jdbcType="BIGINT" property="cid" />
        <result column="pid" jdbcType="BIGINT" property="pid" />
        <result column="authorid" jdbcType="BIGINT" property="authorid" />
        <result column="create_at" jdbcType="BIGINT" property="createAt" />
        <result column="content" jdbcType="LONGVARCHAR" property="content" />
    </resultMap>

</mapper>