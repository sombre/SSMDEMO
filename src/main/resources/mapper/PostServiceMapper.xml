<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssm.dao.PostService">

    <select id="showPostAndComment" resultType="HashMap">
        SELECT p.pid,p.post_title,p.post_authorid,p.post_content,p.post_created_at,p.post_created_by,
        c.cid,c.comm_pid,c.comm_authorid,c.comm_content,c.comm_create_at FROM post as p
        LEFT JOIN comment AS c ON p.pid = c.comm_pid
    </select>

    <sql id="allpost">
        p.pid,p.post_title,p.post_authorid,p.post_content,p.post_created_at,p.post_created_by
    </sql>

    <select id="selectPostComment" resultMap="CommentResultMap" parameterType="int">
        SELECT * FROM comment where comment.comm_pid = #{id}
    </select>

    <resultMap id="CommentResultMap" type="com.ssm.model.Comment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="cid" jdbcType="INTEGER" property="cid" />
        <result column="comm_pid" jdbcType="INTEGER" property="commPid" />
        <result column="comm_authorid" jdbcType="INTEGER" property="commAuthorid" />
        <result column="comm_create_at" jdbcType="INTEGER" property="commCreateAt" />
        <result column="comm_content" jdbcType="LONGVARCHAR" property="commContent" />
    </resultMap>

</mapper>