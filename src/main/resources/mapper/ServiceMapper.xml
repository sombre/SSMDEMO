<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssm.dao.ServiceMapper">

    <select id="showTopicAndComment" resultType="map">
        SELECT t.tid,t.authorid,t.subject,t.posttime,t.content,
        c.cid,c.tid,c.authorid,c.content,c.posttime
        FROM topic t LEFT JOIN comment c ON t.tid = c.tid
    </select>

    <select id="selectTopicComment" resultMap="CommentResultMap" parameterType="int">
        SELECT * FROM comment where comment.tid = #{id}
    </select>

    <resultMap id="UserResultMap" type="com.ssm.model.User">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="uid" jdbcType="INTEGER" property="uid" />
        <result column="username" jdbcType="VARCHAR" property="username" />
        <result column="password" jdbcType="VARCHAR" property="password" />
        <result column="email" jdbcType="VARCHAR" property="email" />
        <result column="phone" jdbcType="VARCHAR" property="phone" />
        <result column="gender" jdbcType="VARCHAR" property="gender" />
        <result column="avatar" jdbcType="VARCHAR" property="avatar" />
        <result column="role" jdbcType="VARCHAR" property="role" />
        <result column="status" jdbcType="INTEGER" property="status" />
        <result column="regtime" jdbcType="INTEGER" property="regtime" />
        <result column="regip" jdbcType="VARCHAR" property="regip" />
        <result column="lastip" jdbcType="VARCHAR" property="lastip" />
    </resultMap>

    <resultMap id="TopicResultMap" type="com.ssm.model.Topic">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="tid" jdbcType="INTEGER" property="tid" />
        <result column="authorid" jdbcType="INTEGER" property="authorid" />
        <result column="subject" jdbcType="VARCHAR" property="subject" />
        <result column="posttime" jdbcType="INTEGER" property="posttime" />
        <result column="content" jdbcType="LONGVARCHAR" property="content" />
    </resultMap>

    <resultMap id="ReplyResultMap" type="com.ssm.model.Reply">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="rid" jdbcType="INTEGER" property="rid" />
        <result column="authorid" jdbcType="INTEGER" property="authorid" />
        <result column="cid" jdbcType="INTEGER" property="cid" />
        <result column="posttime" jdbcType="INTEGER" property="posttime" />
        <result column="content" jdbcType="LONGVARCHAR" property="content" />
    </resultMap>

    <resultMap id="CommentResultMap" type="com.ssm.model.Comment">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="cid" jdbcType="INTEGER" property="cid" />
        <result column="tid" jdbcType="INTEGER" property="tid" />
        <result column="authorid" jdbcType="INTEGER" property="authorid" />
        <result column="posttime" jdbcType="INTEGER" property="posttime" />
        <result column="content" jdbcType="LONGVARCHAR" property="content" />
    </resultMap>

</mapper>