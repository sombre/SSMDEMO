<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssm.dao.PictureService">


    <resultMap id="PictureResultMap" type="com.ssm.model.Picture">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="pic_id" jdbcType="BIGINT" property="picId" />
        <result column="pic_title" jdbcType="VARCHAR" property="picTitle" />
        <result column="uploader_id" jdbcType="BIGINT" property="uploaderId" />
        <result column="upload_at" jdbcType="BIGINT" property="uploadAt" />
        <result column="path" jdbcType="VARCHAR" property="path" />
        <result column="url" jdbcType="VARCHAR" property="url" />
        <result column="thumb_num" jdbcType="BIGINT" property="thumbNum" />
        <result column="collected_num" jdbcType="BIGINT" property="collectedNum" />
        <result column="pic_desc" jdbcType="LONGVARCHAR" property="picDesc" />
    </resultMap>


    <!--<select id="getUserPicture" resultMap="PictureResultMap" parameterType="Long">-->
        <!--SELECT pic_id,pic_title,pic_desc,uploader_id,upload_at,path-->
        <!--FROM picture WHERE uploader_id = #{uid};-->
    <!--</select>-->

    <select id="getUserCollectedPicture" resultMap="PictureResultMap" parameterType="long">
        SELECT p.pic_id,p.pic_title,p.pic_desc,p.uploader_id,p.upload_at,p.path,p.url,p.thumb_num,p.collected_num
        FROM user_picture AS up LEFT JOIN picture AS p
                ON up.picture_id = p.pic_id WHERE up.user_id =#{userId,jdbcType=BIGINT}
    </select>

    <select id="getUserUploadPicture" resultMap="PictureResultMap" parameterType="long">
        SELECT pic_id,pic_title,pic_desc,uploader_id,upload_at,path,url,thumb_num,collected_num
        FROM picture WHERE uploader_id = #{uid,jdbcType=BIGINT}
    </select>

</mapper>